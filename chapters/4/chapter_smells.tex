\startchapter{Code Smells}
\label{chapter:smells}

\section{Introduction}
Having identified the performance of current \cct{} like Copilot on detecting and suggesting common patterns like language idioms in chapter~\ref{chapter:idioms}, in this chapter we test if Copilot suggests code that follows code review standards.
We begin by explaining our approach to \textbf{RQ-1.1} (How do \cct{} manage to write non-smelly code?). To achieve this, we conduct an exploratory study to find if \cct{} tools like Copilot suggest the best practices based on code review standards in their suggestions. 

In section~\ref{smells:methodology}, we describe our sampling approach to collecting best practices in javascript and the evaluation method used to compare Copilot suggestions to the best practices listed in coding style and code review standards. 
In section~\ref{bp}, we show the results of the study comparing Copilot suggestions and code review standards in javascript.

\section{Code Smells}
\label{smells}
A standard style guide is a set of guidelines that explain how code should be written, formatted, and organised. 
Using a style guide ensures that code can be easily shared among developers. As a result, any new developer may immediately become familiar with a specific piece of code and write code that other developers will quickly and easily comprehend.
A good \cct{} tool should only suggest code that is consistent with coding style and passes code reviews by humans. 

We relied on the AirBNB javascript coding style guide~\cite{airbnb_code}, a widely used coding style and code review standard introduced in 2012, which is described as ``mostly reasonable approach to JavaScript''~\cite{airbnb_code}.

\section{Methodology}
\label{smells:methodology}
In this Section, we explain the methodology we used to address \textbf{RQ-1.2} (How do \cct{} manage to suggest non-smelly code?), including how the best practices were sampled (Section~\ref{smells:sampling}), what was the input for Copilot (Section~\ref{smells:input}) and how the Copilot suggestions are evaluated (Section~\ref{smells:evaluation}). All of the following analysis was carried out using Copilot extension in Visual Studio Code. We use the most recent stable release of Copilot extension (version number 1.30.6165) in Visual Studio Code.

\subsection{Sampling Approach}
\label{smells:sampling}
The AirBNB JavaScript coding style guide~\cite{airbnb_code} contains a comprehensive list of best practices covering nearly every aspect of javascript coding like objects, arrays, modules, iterators, but it also includes project specific styling like naming conventions, commas, comments.
Since, we are testing Copilot for widely accepted practices and not project specific styling in javascript. We chose best practices that were closer to design level rather than code level (e.g., logging practices rather than trailing comma use in javascript). 

\subsection{Study Setup}

\subsubsection{Input to Copilot}
\label{smells:input}
The input to Copilot consisted of the best practice title as the first comment to provide context, and the input was restricted to being able to derive the best practice from the input. This is done to ensure Copilot is making the decision to suggest the good/bad way in its suggestions. This input style also mimics a novice user, who is unaware of the best practices in coding style guides and useful \cct{} should drive the novice user to use best practices.

\subsubsection{Evaluation of Copilot suggestions}
\label{smells:evaluation}
If Copilot suggested the best practice in the first suggestion, we considered Copilot followed the coding style guide. we assume that \cct{} like Copilot are productivity tools and user should be saving time as opposed to writing the optimal way without using \cct{}, scrolling through all the suggestions to deduce the best practice that follows the coding style guide defeats this purpose. 
For this reason, We restricted ourselves to first suggestion. However, we do note if the best practice appeared any of the top 10 suggestions currently viewable in Copilot interface. 

\input{chapters/4/best_practices}
\input{chapters/4/summary}