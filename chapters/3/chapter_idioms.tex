\startchapter{Language Idioms}
\label{chapter:idioms}

\section{Introduction}
Useful \cct{} tools should always suggest the optimal way as its first suggestion. In this chapter, we test if Copilot suggests the optimal way. 
We begin by explaining our approach to \textbf{RQ-1.1} (How do \cct{} manage programming idioms?). To achieve this, we conduct an exploratory study to find if \cct{} tools like Copilot suggest the optimal way in their suggestions. It is shown that Copilot's base model Codex performs best in python programming language~\cite{copilot}. So, we chose to test Copilot on python programming language idioms.

In section~\ref{methodology}, we describe our sampling approach to collecting python idioms and the evaluation method used to compare Copilot suggestions to the optimal way listed in python idioms. In section~\ref{secidioms}, we show the results of the study comparing Copilot suggestions and idioms in python programming language. We observe that Copilot performs poorly in suggesting the optimal way in its suggestions. 

\section{Pythonic Idioms}
The definition for the term \emph{Pythonic} in Python found in official Python glossary\footnote{\url{https://docs.python.org/3/glossary.html\#term-pythonic}} as follows:

\begin{quote}
    An idea or piece of code which closely follows the most common idioms of the Python language, rather than implementing code using concepts common to other languages. For example, a common idiom in Python is to loop over all elements of an iterable using a for statement. Many other languages do not have this type of construct, so people unfamiliar with Python sometimes use a numerical counter instead, as opposed to the cleaner, pythonic method.
\end{quote}

This definition indicates a broad meaning, referring to both concrete code, but also \emph{Ideas} in general sense. Many Python developers argue that coding the \emph{pythonic way} is the most accepted way to code by the Python community~\cite{Alexandru2018}. We consider an \emph{idiom} to be any reusable abstraction that makes Python code more readable by shortening or added syntactic sugar. Idioms can also be more efficient than a basic solution and some idioms are both more readable and more efficient.

We sampled idioms from the work of Alexandru et al.~\cite{Alexandru2018}, which identified idioms from presentations given by renowned Python developers that frequently mention Idioms, e.g., Hettinger~\cite{hettinger} and Jeff Knupp~\cite{knupp} and popular Python books, such as ``Pro Python''~\cite{Alchin2010}, ``Fluent Python''~\cite{fluent}, ``Expert Python Programming''~\cite{expert}.

\section{Methodology}
\label{methodology}
In this Section, We explain the methodology we used to address \textbf{RQ-1.1} (How do \cct{} manage programming idioms?), including how the idioms were sampled (Section~\ref{sampling}), what was the input for Copilot (Section~\ref{input}) and how Copilot suggestions are evaluated (Section~\ref{evaluation}). All of the following analysis was carried out using Copilot extension in Visual Studio Code. We use the most recent stable release of Copilot extension (version number 1.30.6165) in Visual Studio Code.

\subsection{Sampling Approach}
\label{sampling}
To give the best chance for Copilot to suggest the optimal way, we sampled the top ten most frequent idioms used in open source projects. So that, Copilot will have the optimal way more frequently in its training data. However, Copilot is closed source and we cannot determine if the frequency of code snippet in training data affects Copilot suggestions in any way. Research by GitHub shows that Copilot can sometimes recite from its training data in ``generic contexts"\footnote{\url{https://github.blog/2021-06-30-github-copilot-research-recitation/}}, which may lead to potential challenges like licence infringements~(shown in section~\ref{challenges}). Sampling the most frequently used idioms will also help understand if Copilot can recite idioms present in its training data~(GitHub public repositories), which is a desirable feature for \cct{}.

\subsection{Study Setup}

\subsubsection{Input to Copilot}
\label{input}
The input to Copilot consisted of the idiom title in the first line as a comment to provide context, and the input was restricted to being able to derive the ideal way~(idiomatic way) from the input. This is done to ensure Copilot is making the decision to suggest the good/bad way in its suggestions and not being restricted by the input to suggest a certain way. 

This input style also mimics a novice user, who is unaware of the idioms and useful \cct{} should drive the novice user to use idiomatic ways to perform a task in their codebases.

\subsubsection{Evaluation of Copilot suggestions}
\label{evaluation}
We considered Copilot suggested the optimal way if Copilot suggested the idiomatic way in the first suggestion, we assume that \cct{} like Copilot are productivity tools and user should be saving time as opposed to writing the optimal way without using \cct{}, scrolling through all the suggestions to deduce the optimal way defeats this purpose. For this reason, we restricted ourselves to first suggestion. However, we do note if the idiomatic way appeared any of the top 10 suggestions currently viewable in Copilot interface. 

% including sections in other files.
\input{chapters/3/idioms}
\input{chapters/3/summary}