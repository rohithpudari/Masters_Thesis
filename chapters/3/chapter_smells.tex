\startchapter{Code Smells}
\label{chapter:smells}

\section{Introduction}
Useful \AISE{} tools should always suggest the optimal way as its first suggestion. In this chapter, we test if \cop{} suggests the optimal way. 
We begin by explaining our approach to \textbf{RQ-1.1} (How do \cct{} manage to write non-smelly code?).

To achieve this, we conduct an exploratory study to find how often does current \cct{} suggest the optimal way in their suggestions. In section~\ref{methodology}, we describe our methodology for the two categories under study: python idioms (Section~\ref{secidioms}) and best practices in javascript (Section~\ref{bp}).
We then compare the suggestions generated by \cop{} and previous works on best practices in Python and JavaScript. We report on how many times \cop{} suggested the optimal way. 

We find that \cop{} performs poorly in suggesting the optimal way in its suggestions. Further, in section~\ref{evolution}, we provide a detailed discussion on how best practices change over time with an example from Asynchronous JavaScript and outline the difficulties of a \cct{} to keep updating its suggestions and reflect the current best practice.


\section{Methodology}
\label{smells:methodology}
In this Section, We explain the methodology we used to address \textbf{RQ-1.2} (How do \cct{} manage programming Idioms and Best Practices?), including how the best practices were sampled (Section~\ref{smells:sampling}), what was the input for copilot (Section~\ref{smells:input}) and how is the suggestion evaluated (Section~\ref{smells:evaluation}). All of the following analysis was carried out using \cop{} extension in Visual Studio Code. We use the most recent stable release of Copilot extension (version number todo) in Visual Studio Code.

\subsection{Sampling Approach}
\label{smells:sampling}
To give the best chance for \cop{} to suggest the optimal way, we sampled the top ten most frequent idioms used in open source projects. So that, \cop{} will have the optimal way more frequently in its training data. However, \cop{} is closed source and we cannot determine if the frequency of code snippet in training data affects \cop{} suggestions in any way. Research by GitHub shows that Copilot can sometimes recite from its training data in ``generic contexts"\footnote{\url{https://github.blog/2021-06-30-github-copilot-research-recitation/}}, which may lead to Licence Infringements shown in Section~\ref{challenges}. Sampling the most frequently used Idioms will also help understand if copilot can recite idioms, which is the ideal behaviour for \cct{}.

\subsection{Study Setup}

\subsubsection{Input to \cop{}}
\label{smells:input}
The input to \cop{} consisted of the idiom title as the first comment to provide context, and the input was restricted to being able to derive the ideal way from the input. This is done to ensure \cop{} is making the decision to suggest the good/bad way in its suggestions. This input style also mimics a novice user, who is unaware of the idioms and useful \cct{} should drive the novice user to use best practices.

\subsubsection{Evaluation}
\label{smells:evaluation}
We considered \cop{} suggested the optimal way if Copilot suggested the best practice in the first suggestion, In this case, we considered \cct{} like \cop{} as productivity tool and user should be saving time as opposed to writing the optimal way without using \cct{}, Scrolling through all the suggestions to deduce the optimal way defeats this purpose. For this reason, We restricted ourselves to first suggestion. However, we do note if the best practice appeared any of the top 10 suggestions currently viewable in \cop{} interface. 

\input{chapters/3/best_practices}
\input{chapters/3/summary}